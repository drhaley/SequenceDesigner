#this file contains information for automated unit tests
# via Travis CI on the github repo

#this is a python project, designed to be compatible with 3.6+
language: python

#this next block could in theory be expanded to include more
# operating systems, if they were supported
matrix:
  include:
    - name: "Python 3.7 on Xenial Linux"
      python: 3.7
      dist: xenial
      env: PYTHON_EXECUTABLE=python
    
#dependencies need to be installed now
install:
  #basic python dependencies (e.g. numpy)
  - pip3 install --upgrade pip
  - pip install numpy

  #install nupack
  - wget --user $NUPACK_USERNAME --password $NUPACK_PASSWORD http://www.nupack.org/downloads/serve_file/$NUPACK_VERSION.tar.gz
  - tar xvzf $NUPACK_VERSION.tar.gz
  - export NUPACKHOME=$PWD/$NUPACK_VERSION
  - mkdir $NUPACK_VERSION/build
  - cd $NUPACK_VERSION/build
  - cmake -DCMAKE_INSTALL_PREFIX=$PWD/../../nupack ../
  - make
  - make install
  - cd ../..
  - export NUPACKINSTALL=$PWD/nupack
  - export PATH=$PATH:$NUPACKINSTALL/bin

# command to run tests
script:
  - $PYTHON_EXECUTABLE tests/designer_tests.py

#Don't send emails about tests to the repo owner
notifications:
  email: false